import{g as C,c as S,r as n,j as e,f as I,b as _}from"./index-CJpT4Mpi.js";import{u as E}from"./useMutation-C7nlVA5o.js";import{u as A}from"./useQuery-BWJx_JCY.js";import{m as F,f as g,e as L,a as O}from"./es-D9rJmWfh.js";import{S as P}from"./react-select.esm-CJJuCj-l.js";import{C as R,M as y}from"./Map-D42TCVdO.js";import{I as V,c as q}from"./customToast-DW0GGLWY.js";import{f as B}from"./formatHour-BRRLKC1k.js";import{u as z,a as H}from"./Translate-Bz6qGM8U.js";import"./Button-CWgbnBvx.js";import"./proxy-BgVQIM8n.js";const h={0:"#d97706",1:"#f59e0b",2:"#47a967",3:"#dc3545"},b={0:"#faefe6",1:"#fff3cd",2:"#eef7f1",3:"#f8d7da"},Y=()=>{const{id:d}=C(),{translate:s}=z(),{idiom:x}=H(),p=S(),[i,v]=n.useState({value:0,label:""}),{data:r,isLoading:c,error:N}=A({queryKey:["order"],queryFn:async()=>(await _.get(`order/getOrder/${d}`)).data.order}),w=E({mutationFn:async t=>{await _.put(`order/updateOrderStatus/${d}`,{status:t})},onSuccess:()=>{p.invalidateQueries({queryKey:["order"]}),p.invalidateQueries({queryKey:["orders"]})},onError:()=>{q("error","Error al actualizar el estado de la orden")}}),M=t=>{if(!t)return"";if(x==="es")return g(t,"d 'de' MMMM 'de' yyyy",{locale:L});if(x==="en")return g(t,"MMMM d, yyyy",{locale:O})},m=n.useMemo(()=>[{value:0,label:s("scheduled2")},{value:1,label:s("in_progress")},{value:2,label:s("completed2")},{value:3,label:s("canceled2")}],[s]),k=()=>{var t,o,f,j;return d?N?e.jsx("div",{children:"Hubo un error"}):c?e.jsx("div",{children:"Cargando..."}):e.jsxs("div",{className:"order_detail",children:[e.jsxs("div",{className:"order_vehicle",children:[e.jsx("div",{className:"order_vehicle_img",children:e.jsx("img",{src:I+"/"+r.vehicle.img_url,alt:r.vehicle.brand+" "+r.vehicle.model})}),e.jsxs("div",{className:"order_vehicle_info",children:[e.jsxs("div",{className:"vehicle_item",children:[e.jsx("div",{children:r.vehicle.brand}),e.jsx("div",{children:r.vehicle.model})]}),e.jsxs("div",{className:"vehicle_item_features",children:[e.jsxs("div",{className:"item_features",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),r.vehicle.capacity]}),e.jsxs("div",{className:"item_features",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"})}),r.vehicle.luggage_capacity]})]})]})]}),e.jsxs("div",{className:"order_container",children:[e.jsxs("div",{className:"left",children:[e.jsxs("div",{className:"order_header",children:[e.jsx("h3",{children:s("reservation_details")}),e.jsx(P,{options:m,value:m.find(a=>a.value==r.status),styles:{control:a=>{const l=b[i==null?void 0:i.value];return{...a,backgroundColor:l,borderRadius:"50px",height:"30px",display:"flex",width:"max-content",justifyContent:"center",alignItems:"center",borderColor:h[i==null?void 0:i.value],boxShadow:"none","&:hover":{borderColor:b[i==null?void 0:i.value]}}},menuPortal:a=>({...a,zIndex:9999}),menu:a=>({...a,borderRadius:"10px",display:"flex",width:"max-content",justifyContent:"center",alignItems:"center",backgroundColor:"#f2f2f2",fontWeight:600}),option:(a,l)=>{const u=h[l.data.value];return{...a,backgroundColor:"transparent",color:u}},indicatorSeparator:a=>({...a,display:"none"}),dropdownIndicator:a=>({...a,display:"none"}),valueContainer:a=>({...a,padding:"0",margin:"0 8px"}),singleValue:(a,l)=>{const u=h[l.data.value];return{...a,color:u,paddingLeft:"0"}}},isSearchable:!1,closeMenuOnScroll:!0,menuPortalTarget:document.body,menuPlacement:"auto",menuPosition:"fixed",onChange:a=>{a&&(v(a),w.mutate(a.value))}})]}),e.jsxs("div",{className:"order_body",children:[e.jsxs("div",{className:"order_detail_item",children:[e.jsx("span",{children:s("origin_address")}),r.origin.formatted_address.replace(/\d/g,"")]}),e.jsxs("div",{className:"order_detail_item",children:[e.jsx("span",{children:s("destination_address")}),r.destination.formatted_address.replace(/\d/g,"")]}),e.jsxs("div",{className:"order_detail_item",children:[e.jsx("span",{children:s("trip_type")}),r.trip_type===1?"One way":"Round trip"]}),e.jsxs("div",{className:"order_detail_item",children:[e.jsx("span",{children:s("departure_date_time")}),M(r.departureDate)," -"," ",B(r.departureHours)]}),e.jsxs("div",{className:"order_detail_item",children:[e.jsx("span",{children:s("total")}),F(r.total)]})]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"right",children:[e.jsx("div",{className:"order_header",children:e.jsx("h3",{children:s("customer")})}),e.jsxs("div",{className:"order_body",children:[e.jsxs("div",{className:"order_detail_item",children:[e.jsxs("span",{children:[" ",s("name")]}),r.customer.name]}),e.jsxs("div",{className:"order_detail_item",children:[e.jsx("span",{children:s("last_name")}),r.customer.lastName]}),e.jsxs("div",{className:"order_detail_item",children:[e.jsx("span",{children:s("email")}),r.customer.email]}),e.jsxs("div",{className:"order_detail_item",children:[e.jsx("span",{children:s("phone")}),r.customer.phone]})]})]}),e.jsx("hr",{}),e.jsx("div",{className:"map",style:{borderRadius:"10px",overflow:"hidden"},children:e.jsxs(R,{center:{lat:18.6652932,lng:-71.4493516},children:[e.jsx(y,{label:{text:"A",color:"white"},position:{lat:parseFloat(((t=r.origin)==null?void 0:t.lat)??0),lng:parseFloat(((o=r.origin)==null?void 0:o.lng)??0)},clickable:!0,onClick:()=>alert("marker was clicked!"),title:"clickable google.maps.Marker"}),e.jsx(y,{label:{text:"B",color:"white"},position:{lat:parseFloat(((f=r.destination)==null?void 0:f.lat)??0),lng:parseFloat(((j=r.destination)==null?void 0:j.lng)??0)},clickable:!0})]})})]})]}):e.jsx("div",{children:"No existe tal orden"})};return n.useEffect(()=>{if(!c&&r){const t=m.find(o=>o.value==r.status);v(t||{value:0,label:""})}},[c,r]),n.useEffect(()=>{const t=document.getElementById("admin_main");t&&t.scrollIntoView()},[]),e.jsxs("div",{children:[e.jsx(V,{}),k()]})};export{Y as default};
